<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tutorial â€” Monolith</title>
<link rel="icon" href="/static/favicon.png" type="image/png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<style>
:root {
  --bg: #0a0a0a;
  --bg-card: #151515;
  --text: #e8e0d8;
  --text-light: #9a8e82;
  --accent: #D4956A;
  --blue: #5b8fb9;
  --red: #c75050;
  --green: #5ba55b;
  --yellow: #c7a840;
  --purple: #9b6eb5;
  --orange: #d48540;
  --teal: #4a9a8a;
  --gray: #888;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'Noto Sans JP', 'Outfit', sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.8;
}

.container {
  max-width: 840px;
  margin: 0 auto;
  padding: 3rem 1.5rem;
}

/* Header */
.tut-header {
  text-align: center;
  margin-bottom: 4rem;
}
.tut-header h1 {
  font-family: 'Outfit', sans-serif;
  font-size: 2rem;
  font-weight: 300;
  letter-spacing: 0.05em;
  margin-bottom: 0.5rem;
}
.tut-header p {
  color: var(--text-light);
  font-size: 0.95rem;
}

/* Step */
.step {
  margin-bottom: 4rem;
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.6s ease, transform 0.6s ease;
}
.step.visible {
  opacity: 1;
  transform: translateY(0);
}

.step-number {
  display: inline-block;
  font-family: 'Outfit', sans-serif;
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: 0.15em;
  color: var(--accent);
  margin-bottom: 1rem;
  text-transform: uppercase;
}

.step h2 {
  font-size: 1.3rem;
  font-weight: 500;
  margin-bottom: 1rem;
}

.step p {
  color: var(--text-light);
  font-size: 0.95rem;
  margin-bottom: 1.5rem;
}

/* Sentence block display */
.sentence-demo {
  background: var(--bg-card);
  border: 1px solid #2a2a2a;
  border-radius: 12px;
  padding: 2rem;
  margin: 1.5rem 0;
}

.blocks {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
  justify-content: center;
  margin-bottom: 0.5rem;
}

.block {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0.8rem 1.2rem;
  border-radius: 8px;
  border: 2px solid;
  opacity: 0;
  transform: scale(0.8);
  transition: opacity 0.5s ease, transform 0.5s ease;
}
.block.show {
  opacity: 1;
  transform: scale(1);
}

.block-en {
  font-family: 'Outfit', sans-serif;
  font-size: 1.4rem;
  font-weight: 600;
}
.block-ja {
  font-size: 0.85rem;
  margin-top: 0.25rem;
}

/* Nested block (block inside block) */
.block-nest {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0.6rem 0.8rem;
  border-radius: 8px;
  gap: 0.4rem;
}
.block-nest .blocks-inner {
  display: flex;
  gap: 0.3rem;
  flex-wrap: wrap;
  justify-content: center;
}
.block-nest .blocks-inner .block {
  padding: 0.4rem 0.6rem;
  font-size: 0.85rem;
  opacity: 0;
}
.block-nest .blocks-inner .block .block-en { font-size: 1rem; }
.block-nest .blocks-inner .block .block-ja { font-size: 0.75rem; }

.block.s { border-color: var(--blue); background: rgba(91,143,185,0.1); }
.block.s .block-en { color: var(--blue); }
.block.s .block-ja { color: rgba(91,143,185,0.7); }

.block.v { border-color: var(--red); background: rgba(199,80,80,0.1); }
.block.v .block-en { color: var(--red); }
.block.v .block-ja { color: rgba(199,80,80,0.7); }

.block.o { border-color: var(--yellow); background: rgba(199,168,64,0.1); }
.block.o .block-en { color: var(--yellow); }
.block.o .block-ja { color: rgba(199,168,64,0.7); }

.block.c { border-color: var(--green); background: rgba(91,165,91,0.1); }
.block.c .block-en { color: var(--green); }
.block.c .block-ja { color: rgba(91,165,91,0.7); }

.block.m { border-color: var(--purple); background: rgba(155,110,181,0.1); }
.block.m .block-en { color: var(--purple); }
.block.m .block-ja { color: rgba(155,110,181,0.7); }

/* Insight callout */
.insight {
  background: rgba(212,149,106,0.08);
  border-left: 3px solid var(--accent);
  padding: 1rem 1.25rem;
  margin: 1.5rem 0;
  border-radius: 0 8px 8px 0;
  font-size: 0.9rem;
  color: var(--text-light);
}
.insight strong {
  color: var(--text);
}

/* Dim blocks for focus effect */
.blocks.focus .block:not(.highlight) {
  opacity: 0.25;
}
.blocks.focus .block.highlight {
  opacity: 1;
  transform: scale(1.05);
}

/* Navigation */
.tut-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 1px solid #222;
}
.tut-nav a {
  color: var(--accent);
  text-decoration: none;
  font-size: 0.95rem;
  transition: opacity 0.2s;
}
.tut-nav a:hover { opacity: 0.7; }

.cta-button {
  display: inline-block;
  padding: 0.8rem 2rem;
  background: var(--accent);
  color: #000;
  border-radius: 6px;
  text-decoration: none;
  font-weight: 600;
  font-size: 0.95rem;
  transition: opacity 0.2s;
}
.cta-button:hover { opacity: 0.85; }

/* Arrow between blocks */
.arrow {
  color: var(--text-light);
  font-size: 1.2rem;
  align-self: center;
  opacity: 0;
  transition: opacity 0.5s ease;
}
.arrow.show { opacity: 0.4; }

/* Hidden school hints â€” revealed on Shift */
.school-hint {
  font-size: 0.8rem;
  color: #666;
  display: inline;
  opacity: 0;
  max-height: 0;
  overflow: hidden;
  transition: opacity 0.4s ease, max-height 0.4s ease;
}
body.shift-active .school-hint {
  opacity: 1;
  max-height: 3em;
}

/* Responsive */
@media (max-width: 600px) {
  .block-en { font-size: 1.1rem; }
  .block { padding: 0.6rem 0.8rem; }
  .container { padding: 2rem 1rem; }
}
</style>
</head>
<body>
<div class="container">

<div class="tut-header">
  <h1><i class="fas fa-cube" style="color:var(--accent);margin-right:0.3em;font-size:0.8em"></i> Monolith Tutorial</h1>
  <p>3ã¤ã®è‰²ã‚’è¦šãˆã‚‹ã ã‘ã€‚ãã‚Œã ã‘ã§è‹±èªãŒèª­ã‚ã‚‹ã€‚</p>
</div>

<!-- STEP 1: 3è‰² -->
<div class="step" id="step1">
  <span class="step-number">Step 1</span>
  <h2>è¨€è‘‰ã®ä¸‰åŸè‰²</h2>
  <p>ã‚€ãšã‹ã—ã„æ–‡æ³•ç”¨èªã¯å¿˜ã‚Œã¦ãã ã•ã„ã€‚<br>è‹±èªã®æ–‡ã¯ã€ãŸã£ãŸ3ã¤ã®ãƒ‘ãƒ¼ãƒ„ã§ã§ãã¦ã„ã¾ã™ã€‚</p>

  <div class="sentence-demo">
    <div class="blocks" id="blocks1">
      <div class="block s" data-delay="0">
        <span class="block-en">I</span>
        <span class="block-ja">ã‚ãŸã—ã¯</span>
      </div>
      <div class="block v" data-delay="400">
        <span class="block-en">like</span>
        <span class="block-ja">ã™ããªã‚“ã </span>
      </div>
      <div class="block o" data-delay="800">
        <span class="block-en">cats</span>
        <span class="block-ja">çŒ«ãŒï¼</span>
      </div>
    </div>
  </div>

  <div class="insight">
    <strong style="color:var(--blue)">é’</strong> = èª°ãŒã€€ã€€<strong style="color:var(--red)">èµ¤</strong> = ã©ã†ã—ãŸã€€ã€€<strong style="color:var(--yellow)">é»„</strong> = ä½•ã‚’<br>
    ã“ã‚Œã ã‘ã€‚ã“ã‚ŒãŒè‹±èªã®éª¨æ ¼ã§ã™ã€‚
  </div>
</div>

<!-- STEP 2: ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯åŒã˜ -->
<div class="step" id="step2">
  <span class="step-number">Step 2</span>
  <h2>ã©ã‚“ãªæ–‡ã§ã‚‚ã€åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³</h2>
  <p>åˆ¥ã®æ–‡ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>

  <div class="sentence-demo">
    <div class="blocks" id="blocks2">
      <div class="block s" data-delay="0">
        <span class="block-en">He</span>
        <span class="block-ja">å½¼ã¯</span>
      </div>
      <div class="block v" data-delay="400">
        <span class="block-en">kicked</span>
        <span class="block-ja">è¹´ã£ãŸã‚“ã </span>
      </div>
      <div class="block o" data-delay="800">
        <span class="block-en">the ball</span>
        <span class="block-ja">ãã®ãƒœãƒ¼ãƒ«ã‚’</span>
      </div>
    </div>
  </div>

  <div class="sentence-demo" style="margin-top:1rem">
    <div class="blocks" id="blocks2b">
      <div class="block s" data-delay="0">
        <span class="block-en">My sister</span>
        <span class="block-ja">ã‚ãŸã—ã®å¦¹ãŒ</span>
      </div>
      <div class="block v" data-delay="400">
        <span class="block-en">plays</span>
        <span class="block-ja">å¼¾ãã‚“ã ã‚ˆ</span>
      </div>
      <div class="block o" data-delay="800">
        <span class="block-en">the piano</span>
        <span class="block-ja">ãƒ”ã‚¢ãƒã‚’</span>
      </div>
    </div>
  </div>

  <div class="insight">
    <strong><span style="color:var(--blue)">é’</span> â†’ <span style="color:var(--red)">èµ¤</span> â†’ <span style="color:var(--yellow)">é»„</span>ã€‚ã„ã¤ã‚‚åŒã˜é †ç•ªã€‚</strong><br>
    ä¸»èªãŒ1å˜èªã§ã‚‚2å˜èªã§ã‚‚ã€è‰²ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚<br>
    è‹±èªã¯ã€Œ<span style="color:var(--blue)">èª°ãŒ</span> â†’ <span style="color:var(--red)">ã©ã†ã—ãŸ</span> â†’ <span style="color:var(--yellow)">ä½•ã‚’</span>ã€ã®é †ç•ªã§ä¸¦ã¶è¨€èªã€‚æ—¥æœ¬èªã¨ã¯é€†ã§ã™ã­ã€‚
  </div>
</div>

<!-- STEP 3: å…¨8è‰²ã‚¬ã‚¤ãƒ‰ -->
<div class="step" id="step3">
  <span class="step-number">Step 3</span>
  <h2>8ã¤ã®è‰²ã‚’çŸ¥ã‚ã†</h2>
  <p>è‹±èªã®ã™ã¹ã¦ã®æ–‡ã¯ã€ã“ã®8è‰²ã®çµ„ã¿åˆã‚ã›ã§ã§ãã¦ã„ã¾ã™ã€‚<br>ã¾ãšã¯<span style="color:var(--blue)">é’</span>ãƒ»<span style="color:var(--red)">èµ¤</span>ãƒ»<span style="color:var(--yellow)">é»„</span>ã ã‘è¦šãˆã‚Œã°å¤§ä¸ˆå¤«ã€‚æ®‹ã‚Šã¯ä½¿ã†ã†ã¡ã«è‡ªç„¶ã¨ã‚ã‹ã‚Šã¾ã™ã€‚</p>

  <!-- é’ = S -->
  <h3 style="color:var(--blue); margin-top:2rem;"><i class="fas fa-star" style="margin-right:0.3em"></i> é’ â€” èª°ãŒ</h3>
  <p>æ–‡ã®ä¸»å½¹ã€‚ã€Œ<span style="color:var(--blue)">èª°ãŒ</span>ã€ã€Œ<span style="color:var(--blue)">ä½•ãŒ</span>ã€ã«ã‚ãŸã‚‹éƒ¨åˆ†ã§ã™ã€‚</p>
  <div class="sentence-demo">
    <div class="blocks" id="blocks3-s">
      <div class="block s" data-delay="0"><span class="block-en">I</span><span class="block-ja">ã‚ãŸã—ã¯</span></div>
      <div class="block v" data-delay="300"><span class="block-en">run</span><span class="block-ja">èµ°ã‚‹ã‚“ã </span></div>
    </div>
  </div>
  <div class="insight">
    ãƒãƒ¼ã‚¯ã¯<strong style="color:var(--blue)"><i class="fas fa-star"></i> æ˜Ÿ</strong>ã€‚æ–‡ã®ä¸»å½¹ã ã‹ã‚‰ã€ä¸€ç•ªè¼ãæ˜Ÿã€‚<br>
    <span class="school-hint">å­¦æ ¡ã§ã¯ã€Œä¸»èªã€ã¨ç¿’ã£ãŸã‹ã‚‚ã—ã‚Œãªã„ã€‚è¦šãˆãªãã¦ã„ã„ã€‚é’ã„æ˜Ÿã‚’æ¢ã›ã°ã„ã„ã€‚</span><br>
    è‹±èªã®æ–‡ã¯å¿…ãšã€Œ<span style="color:var(--blue)">é’</span>ã€ã‹ã‚‰å§‹ã¾ã‚Šã¾ã™ã€‚ã¾ãšã‚¹ã‚¿ãƒ¼ã‚’æ¢ã›ã°ã€æ–‡ãŒèª­ã‚ã‚‹ã€‚
  </div>

  <!-- èµ¤ = V -->
  <h3 style="color:var(--red); margin-top:2rem;"><i class="fas fa-car" style="margin-right:0.3em"></i> èµ¤ â€” ã©ã†ã—ãŸ</h3>
  <p><span style="color:var(--red)">å‹•ã</span>ã€‚ã€Œ<span style="color:var(--red)">ã€œã™ã‚‹</span>ã€ã€Œ<span style="color:var(--red)">ã€œã—ãŸ</span>ã€ã«ã‚ãŸã‚‹éƒ¨åˆ†ã§ã™ã€‚</p>
  <div class="sentence-demo">
    <div class="blocks" id="blocks3-v">
      <div class="block s" data-delay="0"><span class="block-en">She</span><span class="block-ja">å½¼å¥³ã¯</span></div>
      <div class="block v" data-delay="300"><span class="block-en">sings</span><span class="block-ja">æ­Œã†ã‚“ã ã‚ˆ</span></div>
    </div>
  </div>
  <div class="insight">
    ãƒãƒ¼ã‚¯ã¯<strong style="color:var(--red)"><i class="fas fa-car"></i> è»Š</strong>ã€‚æ–‡ã‚’å‰ã«å‹•ã‹ã™ã‚¨ãƒ³ã‚¸ãƒ³ã€‚<br>
    <span class="school-hint">å­¦æ ¡ã§ã¯ã€Œå‹•è©ã€ã¨ç¿’ã£ãŸã‹ã‚‚ã—ã‚Œãªã„ã€‚è¦šãˆãªãã¦ã„ã„ã€‚èµ¤ã„è»Šã‚’æ¢ã›ã°ã„ã„ã€‚</span><br>
    <span style="color:var(--blue)">é’</span>ï¼ˆèª°ãŒï¼‰ã®æ¬¡ã«æ¥ã‚‹ã®ãŒ<span style="color:var(--red)">èµ¤</span>ï¼ˆã©ã†ã—ãŸï¼‰ã€‚ã“ã®2ã¤ã ã‘ã§æ–‡ã¯æˆã‚Šç«‹ã¡ã¾ã™ã€‚<br>
    <strong>ğŸ’¡ ã‚³ãƒ„ï¼š</strong><span style="color:var(--red)">èµ¤</span>ã‚’è¨³ã™ã¨ãã€ç¾åœ¨å½¢ãªã‚‰ã€Œ<span style="color:var(--red)">ã€œã ã‚ˆ</span>ã€ã€éå»å½¢ãªã‚‰ã€Œ<span style="color:var(--red)">ã€œã ã£ãŸã‚“ã </span>ã€ã‚’ã¤ã‘ã‚‹ã¨è©±ã—è¨€è‘‰ã«ãªã£ã¦ã‚ã‹ã‚Šã‚„ã™ã„ã€‚
  </div>

  <!-- ç·‘ = O -->
  <h3 style="color:var(--yellow); margin-top:2rem;"><i class="fas fa-crosshairs" style="margin-right:0.3em"></i> é»„ â€” ä½•ã‚’</h3>
  <p>å‹•ä½œã®ç›¸æ‰‹ã€‚ã€Œ<span style="color:var(--yellow)">ä½•ã‚’</span>ã€ã€Œ<span style="color:var(--yellow)">èª°ã‚’</span>ã€ã«ã‚ãŸã‚‹éƒ¨åˆ†ã§ã™ã€‚</p>
  <div class="sentence-demo">
    <div class="blocks" id="blocks3-o">
      <div class="block s" data-delay="0"><span class="block-en">He</span><span class="block-ja">å½¼ã¯</span></div>
      <div class="block v" data-delay="300"><span class="block-en">kicked</span><span class="block-ja">è¹´ã£ãŸã‚“ã </span></div>
      <div class="block o" data-delay="600"><span class="block-en">the ball</span><span class="block-ja">ãƒœãƒ¼ãƒ«ã‚’</span></div>
    </div>
  </div>
  <div class="insight">
    ãƒãƒ¼ã‚¯ã¯<strong style="color:var(--yellow)"><i class="fas fa-crosshairs"></i> çš„</strong>ã€‚å‹•ä½œãŒå‘ã‹ã†å…ˆã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã€‚<br>
    <span class="school-hint">å­¦æ ¡ã§ã¯ã€Œç›®çš„èªã€ã¨ç¿’ã£ãŸã‹ã‚‚ã—ã‚Œãªã„ã€‚è¦šãˆãªãã¦ã„ã„ã€‚èµ¤ã®å‹•ããŒå½“ãŸã‚‹é»„è‰²ã®çš„ã€‚</span><br>
    <span style="color:var(--red)">è¹´ã‚‹</span>â†’<span style="color:var(--yellow)">ãƒœãƒ¼ãƒ«</span>ã€‚<span style="color:var(--red)">é£Ÿã¹ã‚‹</span>â†’<span style="color:var(--yellow)">ã‚Šã‚“ã”</span>ã€‚<span style="color:var(--red)">èµ¤</span>ã®å‹•ããŒã€Œå½“ãŸã‚‹ã€ç›¸æ‰‹ãŒ<span style="color:var(--yellow)">é»„</span>ã§ã™ã€‚
  </div>

  <!-- é»„ = C -->
  <h3 style="color:var(--green); margin-top:2rem;"><i class="fas fa-scale-balanced" style="margin-right:0.3em"></i> ç·‘ â€” ï¼ï¼ˆã‚¤ã‚³ãƒ¼ãƒ«ï¼‰</h3>
  <p><span style="color:var(--red)">èµ¤</span>ãŒã€Œï¼ã€ã«ãªã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚ã‚ã®å¿Œã€…ã—ã„ "<span style="color:var(--red)">beå‹•è©</span>"ã€‚<br>ãã®ã¨ãã€<span style="color:var(--red)">èµ¤</span>ã®ã¨ãªã‚Šã¯<span style="color:var(--yellow)">é»„</span>ã˜ã‚ƒãªãã¦<span style="color:var(--green)">ç·‘</span>ã«å¤‰ã‚ã‚‹ã€‚<br><span style="color:var(--blue)">é’</span>ï¼ˆèª°ãŒï¼‰ã¨åŒã˜ã‚‚ã®ã‚’æŒ‡ã—ã¦ã‚‹ã‹ã‚‰ã€<span style="color:var(--blue)">é’</span>ï¼‹<span style="color:var(--yellow)">é»„</span>ï¼<span style="color:var(--green)">ç·‘</span>ã€‚</p>
  <div class="sentence-demo">
    <div class="blocks" id="blocks3-c">
      <div class="block s" data-delay="0"><span class="block-en">The sky</span><span class="block-ja">ç©ºã¯</span></div>
      <div class="block v" data-delay="300"><span class="block-en">is</span><span class="block-ja">ï¼</span></div>
      <div class="block c" data-delay="600"><span class="block-en">blue</span><span class="block-ja">é’ã„</span></div>
    </div>
  </div>
  <div class="insight">
    ãƒãƒ¼ã‚¯ã¯<strong style="color:var(--green)"><i class="fas fa-scale-balanced"></i> å¤©ç§¤</strong>ã€‚å·¦ã¨å³ãŒé‡£ã‚Šåˆã†ï¼ã‚¤ã‚³ãƒ¼ãƒ«ã€‚<br>
    <span style="color:var(--blue)">He</span> <span style="color:var(--red)">kicked</span> <span style="color:var(--yellow)">the ball</span> â†’ <span style="color:var(--red)">èµ¤</span>ã¯å‹•ä½œã€‚ã¨ãªã‚Šã¯<span style="color:var(--yellow)">é»„</span>ï¼ˆä½•ã‚’ï¼‰ã€‚<br>
    <span style="color:var(--blue)">The sky</span> <span style="color:var(--red)">is</span> <span style="color:var(--green)">blue</span> â†’ <span style="color:var(--red)">èµ¤</span>ãŒï¼ã€‚ã¨ãªã‚Šã¯<span style="color:var(--green)">ç·‘</span>ã«å¤‰ã‚ã‚‹ã€‚
  </div>

  <!-- ç´« = M -->
  <h3 style="color:var(--purple); margin-top:2rem;"><i class="fas fa-gem" style="margin-right:0.3em"></i> ç´« â€” é£¾ã‚Š</h3>
  <p><span style="color:var(--purple)">ã„ã¤</span>ã€<span style="color:var(--purple)">ã©ã“ã§</span>ã€<span style="color:var(--purple)">ã©ã®ã‚ˆã†ã«</span>ã€‚ãªãã¦ã‚‚æ–‡ã¯æˆã‚Šç«‹ã¤ã‘ã©ã€ã‚ã‚‹ã¨è±Šã‹ã«ãªã‚‹ã€‚</p>
  <div class="sentence-demo">
    <div class="blocks" id="blocks3-m">
      <div class="block s" data-delay="0"><span class="block-en">She</span><span class="block-ja">å½¼å¥³ã¯</span></div>
      <div class="block v" data-delay="300"><span class="block-en">drinks</span><span class="block-ja">é£²ã‚€</span></div>
      <div class="block o" data-delay="600"><span class="block-en">coffee</span><span class="block-ja">ã‚³ãƒ¼ãƒ’ãƒ¼ã‚’</span></div>
      <div class="block m" data-delay="900"><span class="block-en">every morning</span><span class="block-ja">æ¯æœ</span></div>
    </div>
  </div>
  <div class="insight">
    ãƒãƒ¼ã‚¯ã¯<strong style="color:var(--purple)"><i class="fas fa-gem"></i> å®çŸ³</strong>ã€‚æ–‡ã«è¼ãã‚’æ·»ãˆã‚‹ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼ã€‚<br>
    <span class="school-hint">å­¦æ ¡ã§ã¯ã€Œä¿®é£¾èªã€ã¨ç¿’ã£ãŸã‹ã‚‚ã—ã‚Œãªã„ã€‚è¦šãˆãªãã¦ã„ã„ã€‚ãªãã¦ã‚‚æ–‡ã¯æˆã‚Šç«‹ã¤ã€‚</span><br>
    <span style="color:var(--purple)">ç´«</span>ã‚’å–ã‚Šé™¤ã„ã¦ã‚‚ "She drinks coffee" ã§é€šã˜ã‚‹ã€‚ã§ã‚‚<span style="color:var(--purple)">ç´«</span>ãŒã‚ã‚‹ã¨æƒ…æ™¯ãŒæµ®ã‹ã¶ã€‚
  </div>

  <!-- æ©™ = REL -->
  <h3 style="color:var(--orange); margin-top:2rem;"><i class="fas fa-layer-group" style="margin-right:0.3em"></i> æ©™ â€” ã¤ãªã</h3>
  <p>ã€Œ<span style="color:var(--orange)">ã€œãª</span>ã€ã€Œ<span style="color:var(--orange)">ã€œã—ãŸ</span>ã€ã€Œ<span style="color:var(--orange)">ã€œã¨ã„ã†</span>ã€ã€‚è¨€è‘‰ã«èª¬æ˜ã‚’ãã£ã¤ã‘ã‚‹ã€‚</p>
  <div class="sentence-demo">
    <div class="blocks" id="blocks3-rel">
      <div class="block s" data-delay="0"><span class="block-en">The book</span><span class="block-ja">ãã®æœ¬ã¯</span></div>
      <div class="block-nest" data-delay="300" style="border:2px solid var(--orange); border-radius:8px; background:rgba(212,133,64,0.1); opacity:0; transform:scale(0.8); transition:opacity 0.5s ease, transform 0.5s ease;">
        <div class="blocks-inner">
          <div class="block s" data-delay="500"><span class="block-en">that I</span><span class="block-ja">ã‚ãŸã—ãŒ</span></div>
          <div class="block v" data-delay="700"><span class="block-en">bought</span><span class="block-ja">è²·ã£ãŸ</span></div>
        </div>
      </div>
      <div class="block v" data-delay="900"><span class="block-en">was</span><span class="block-ja">ã ã£ãŸã‚“ã </span></div>
      <div class="block c" data-delay="1100"><span class="block-en">interesting</span><span class="block-ja">é¢ç™½ã„</span></div>
    </div>
  </div>
  <div class="insight">
    ãƒãƒ¼ã‚¯ã¯<strong style="color:var(--orange)"><i class="fas fa-layer-group"></i> é‡ãªã‚Š</strong>ã€‚æ–‡ã®ä¸­ã«ã‚‚ã†ä¸€ã¤ã®æƒ…å ±ãŒé‡ãªã£ã¦ã„ã‚‹ã€‚<br>
    <span class="school-hint">å­¦æ ¡ã§ã¯ã€Œé–¢ä¿‚è©ç¯€ã€ã¨ã‹ç¿’ã‚ã•ã‚ŒãŸãŒã€è¦šãˆãªãã¦ã„ã„ã€‚æ‹¬å¼§ã®æ„Ÿè¦šã§OKã€‚</span><br>
    æ©™ã¯æ‹¬å¼§ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚"The book <strong style="color:var(--orange)">ï¼ˆã‚ãŸã—ãŒè²·ã£ãŸã‚„ã¤ï¼‰</strong>" â€”â€”ãƒ¡ã‚¤ãƒ³ã®æ–‡ã«è£œè¶³èª¬æ˜ã‚’ãã£ã¤ã‘ã‚‹è‰²ã§ã™ã€‚<br>
    <span style="color:var(--orange)">æ©™</span>ã®ä¸­ã«ã¯åˆ¥ã®ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆ<span style="color:var(--blue)">é’</span>ã‚„<span style="color:var(--red)">èµ¤</span>ã‚„<span style="color:var(--yellow)">é»„</span>ï¼‰ãŒå…¥ã‚Šã¾ã™ã€‚æ‹¬å¼§ã®ä¸­ã«ã‚‚ã†ä¸€ã¤ã®æ–‡ãŒã‚ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚
  </div>

  <!-- é’ç·‘ = SUB -->
  <h3 style="color:var(--teal); margin-top:2rem;"><i class="fas fa-handshake" style="margin-right:0.3em"></i> é’ç·‘ â€” ã‚‚ã†ä¸€ã¤ã®æ–‡</h3>
  <p>ã€Œ<span style="color:var(--teal)">ã€œã®ã§</span>ã€ã€Œ<span style="color:var(--teal)">ã€œã®ã¨ã</span>ã€ã€Œ<span style="color:var(--teal)">ã‚‚ã—ã€œãªã‚‰</span>ã€ã€‚ç†ç”±ã‚„æ¡ä»¶ã‚’æ·»ãˆã‚‹ã€‚</p>
  <div class="sentence-demo">
    <div class="blocks" id="blocks3-sub">
      <div class="block-nest" data-delay="0" style="border:2px solid var(--teal); border-radius:8px; background:rgba(74,154,138,0.1); opacity:0; transform:scale(0.8); transition:opacity 0.5s ease, transform 0.5s ease;">
        <div class="blocks-inner">
          <div class="block m" data-delay="200"><span class="block-en">Because</span><span class="block-ja">ã€œã®ã§</span></div>
          <div class="block s" data-delay="400"><span class="block-en">it</span><span class="block-ja">ãã‚ŒãŒ</span></div>
          <div class="block v" data-delay="600"><span class="block-en">rained</span><span class="block-ja">é™ã£ãŸã‚“ã </span></div>
        </div>
      </div>
      <div class="block s" data-delay="800"><span class="block-en">we</span><span class="block-ja">ç§ãŸã¡ã¯</span></div>
      <div class="block v" data-delay="1000"><span class="block-en">stayed</span><span class="block-ja">ã„ãŸã‚“ã </span></div>
      <div class="block m" data-delay="1200"><span class="block-en">home</span><span class="block-ja">å®¶ã«</span></div>
    </div>
  </div>
  <div class="insight">
    ãƒãƒ¼ã‚¯ã¯<strong style="color:var(--teal)"><i class="fas fa-handshake"></i> æ¡æ‰‹</strong>ã€‚ãƒ¡ã‚¤ãƒ³ã®æ–‡ã¨æ‰‹ã‚’ã¤ãªãã‚µãƒ–ã®æ–‡ã€‚<br>
    <span class="school-hint">å­¦æ ¡ã§ã¯ã€Œå¾“å±ç¯€ã€ã¨ç¿’ã£ãŸã‹ã‚‚ã—ã‚Œãªã„ã€‚ä¸­èº«ã¯ãŸã ã®æ–‡ã€‚æ—¥æœ¬ã§ã¯ã‚ã¾ã‚Šè¨€ã„è¨³ãŒã¾ã—ã„ã¨å«Œã‚ã‚Œã¾ã™ã€‚</span><br>
    <span style="color:var(--teal)">é’ç·‘</span>ã®ã‹ãŸã¾ã‚Šã¯ã€ãã‚Œè‡ªä½“ãŒä¸€ã¤ã®æ–‡ã€‚ãƒ¡ã‚¤ãƒ³ã®æ–‡ã«ã€Œç†ç”±ã€ã‚„ã€Œæ¡ä»¶ã€ã‚’ãã£ã¤ã‘ã¾ã™ã€‚<br>
    <span style="color:var(--orange)">æ©™</span>ã¨åŒã˜ãã€ä¸­ã«ã¯åˆ¥ã®ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆ<span style="color:var(--blue)">é’</span>ãƒ»<span style="color:var(--red)">èµ¤</span>ãƒ»<span style="color:var(--yellow)">é»„</span>â€¦ï¼‰ãŒå…¥ã‚Šã¾ã™ã€‚
  </div>
  <div class="insight" style="border-left-color: #666;">
    <strong><span style="color:var(--orange)">æ©™</span> ã¨ <span style="color:var(--teal)">é’ç·‘</span> ã®é•ã„ï¼š</strong><br>
    <span style="color:var(--orange)">æ©™</span> = <strong>è¨€è‘‰</strong>ã«ãã£ã¤ãã€‚ã€Œã‚ãŸã—ãŒè²·ã£ãŸ<strong>æœ¬</strong>ã€â€”â€”ã©ã‚“ãªæœ¬ï¼Ÿã‚’èª¬æ˜ã™ã‚‹ã€‚<br>
    <span style="color:var(--teal)">é’ç·‘</span> = <strong>æ–‡</strong>ã«ãã£ã¤ãã€‚ã€Œé›¨ãŒé™ã£ãŸã®ã§ã€<strong>å®¶ã«ã„ãŸ</strong>ã€â€”â€”ãªãœï¼Ÿã„ã¤ï¼Ÿã‚’èª¬æ˜ã™ã‚‹ã€‚
  </div>

  <!-- ç° = CONJ -->
  <h3 style="color:var(--gray); margin-top:2rem;"><i class="fas fa-link" style="margin-right:0.3em"></i> ç°è‰² â€” é–</h3>
  <p>ã€Œ<span style="color:var(--gray)">ã¨</span>ã€ã€Œ<span style="color:var(--gray)">ã—ã‹ã—</span>ã€ã€Œ<span style="color:var(--gray)">ãã—ã¦</span>ã€ã€‚æ–‡ã¨æ–‡ã€è¨€è‘‰ã¨è¨€è‘‰ã‚’ãã£ã¤ã‘ã‚‹ã€‚</p>
  <div class="sentence-demo">
    <div class="blocks" id="blocks3-conj">
      <div class="block s" data-delay="0"><span class="block-en">I</span><span class="block-ja">ã‚ãŸã—ã¯</span></div>
      <div class="block v" data-delay="300"><span class="block-en">like</span><span class="block-ja">å¥½ã</span></div>
      <div class="block o" data-delay="600"><span class="block-en">cats</span><span class="block-ja">çŒ«</span></div>
      <div class="block" data-delay="900" style="border-color:var(--gray);background:rgba(136,136,136,0.1);"><span class="block-en" style="color:var(--gray);">and</span><span class="block-ja" style="color:rgba(136,136,136,0.7);">ã¨</span></div>
      <div class="block o" data-delay="1200"><span class="block-en">dogs</span><span class="block-ja">çŠ¬ãŒ</span></div>
    </div>
  </div>
  <div class="insight">
    ãƒãƒ¼ã‚¯ã¯<strong style="color:var(--gray)"><i class="fas fa-link"></i> é–</strong>ã€‚ç‰©ã¨ç‰©ã‚’ãã£ã¤ã‘ã‚‹ã€‚
  </div>
</div>

<!-- STEP 4: ã¾ã¨ã‚ -->
<div class="step" id="step4">
  <span class="step-number">Step 4</span>
  <h2>ã“ã‚Œã ã‘è¦šãˆã‚Œã°ã€ã‚ã¨ã¯æ…£ã‚Œã‚‹ã ã‘</h2>

  <div class="sentence-demo">
    <div style="display:grid; grid-template-columns:repeat(2,1fr); gap:1rem; text-align:center;">
      <div>
        <div style="width:48px;height:48px;border-radius:50%;background:var(--blue);margin:0 auto 0.5rem;display:flex;align-items:center;justify-content:center;"><i class="fas fa-star" style="color:#fff;font-size:1rem;"></i></div>
        <div style="font-weight:600;color:var(--blue);">é’ <i class="fas fa-star" style="font-size:0.7rem"></i></div>
        <div style="color:var(--text-light);font-size:0.85rem;">èª°ãŒ</div>
      </div>
      <div>
        <div style="width:48px;height:48px;border-radius:50%;background:var(--red);margin:0 auto 0.5rem;display:flex;align-items:center;justify-content:center;"><i class="fas fa-car" style="color:#fff;font-size:1rem;"></i></div>
        <div style="font-weight:600;color:var(--red);">èµ¤ <i class="fas fa-car" style="font-size:0.7rem"></i></div>
        <div style="color:var(--text-light);font-size:0.85rem;">ã©ã†ã—ãŸ</div>
      </div>
      <div>
        <div style="width:48px;height:48px;border-radius:50%;background:var(--yellow);margin:0 auto 0.5rem;display:flex;align-items:center;justify-content:center;"><i class="fas fa-crosshairs" style="color:#fff;font-size:1rem;"></i></div>
        <div style="font-weight:600;color:var(--yellow);">é»„ <i class="fas fa-crosshairs" style="font-size:0.7rem"></i></div>
        <div style="color:var(--text-light);font-size:0.85rem;">ä½•ã‚’</div>
      </div>
      <div>
        <div style="width:48px;height:48px;border-radius:50%;background:var(--green);margin:0 auto 0.5rem;display:flex;align-items:center;justify-content:center;"><i class="fas fa-scale-balanced" style="color:#fff;font-size:1rem;"></i></div>
        <div style="font-weight:600;color:var(--green);">ç·‘ <i class="fas fa-scale-balanced" style="font-size:0.7rem"></i></div>
        <div style="color:var(--text-light);font-size:0.85rem;">ï¼ï¼ˆã‚¤ã‚³ãƒ¼ãƒ«ï¼‰</div>
      </div>
      <div>
        <div style="width:48px;height:48px;border-radius:50%;background:var(--purple);margin:0 auto 0.5rem;display:flex;align-items:center;justify-content:center;"><i class="fas fa-gem" style="color:#fff;font-size:1rem;"></i></div>
        <div style="font-weight:600;color:var(--purple);">ç´« <i class="fas fa-gem" style="font-size:0.7rem"></i></div>
        <div style="color:var(--text-light);font-size:0.85rem;">é£¾ã‚Šï¼ˆã„ã¤ãƒ»ã©ã“ã§ï¼‰</div>
      </div>
      <div>
        <div style="width:48px;height:48px;border-radius:50%;background:var(--orange);margin:0 auto 0.5rem;display:flex;align-items:center;justify-content:center;"><i class="fas fa-layer-group" style="color:#fff;font-size:1rem;"></i></div>
        <div style="font-weight:600;color:var(--orange);">æ©™ <i class="fas fa-layer-group" style="font-size:0.7rem"></i></div>
        <div style="color:var(--text-light);font-size:0.85rem;">ã¤ãªãï¼ˆã€œãªã€ã€œã—ãŸï¼‰</div>
      </div>
      <div>
        <div style="width:48px;height:48px;border-radius:50%;background:var(--teal);margin:0 auto 0.5rem;display:flex;align-items:center;justify-content:center;"><i class="fas fa-handshake" style="color:#fff;font-size:1rem;"></i></div>
        <div style="font-weight:600;color:var(--teal);">é’ç·‘ <i class="fas fa-handshake" style="font-size:0.7rem"></i></div>
        <div style="color:var(--text-light);font-size:0.85rem;">ã‚‚ã†ä¸€ã¤ã®æ–‡ï¼ˆã€œã®ã§ï¼‰</div>
      </div>
      <div>
        <div style="width:48px;height:48px;border-radius:50%;background:var(--gray);margin:0 auto 0.5rem;display:flex;align-items:center;justify-content:center;"><i class="fas fa-link" style="color:#fff;font-size:1rem;"></i></div>
        <div style="font-weight:600;color:var(--gray);">ç°è‰² <i class="fas fa-link" style="font-size:0.7rem"></i></div>
        <div style="color:var(--text-light);font-size:0.85rem;">é–ï¼ˆã¨ã€ã—ã‹ã—ï¼‰</div>
      </div>
    </div>
    <p style="color:var(--text-light);font-size:0.8rem;text-align:center;margin-top:1rem;">
      ã‚¢ãƒ—ãƒªã§ã¯å„ãƒ–ãƒ­ãƒƒã‚¯ã«ã“ã®ãƒãƒ¼ã‚¯ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br>è‰²ï¼‹ãƒãƒ¼ã‚¯ã§ã€ãƒ‘ãƒƒã¨è¦‹ã¦ã‚ã‹ã‚‹ä»•çµ„ã¿ã§ã™ã€‚
    </p>
  </div>

  <div class="insight">
    æœ€åˆã¯<strong><span style="color:var(--blue)">é’</span>ãƒ»<span style="color:var(--red)">èµ¤</span>ãƒ»<span style="color:var(--yellow)">é»„</span></strong>ã ã‘æ„è­˜ã™ã‚Œã°OKã€‚<br>
    ä»–ã®è‰²ã¯ã€ä½¿ã£ã¦ã„ã‚‹ã†ã¡ã«è‡ªç„¶ã¨è¦‹ãˆã¦ãã¾ã™ã€‚<br>
    <strong>æ–‡æ³•ç”¨èªã¯ä¸€ã¤ã‚‚è¦šãˆãªãã¦ã„ã„ã€‚è‰²ãŒæ•™ãˆã¦ãã‚Œã‚‹ã€‚</strong>
  </div>

  <div class="insight" style="background:rgba(136,136,136,0.05); border-left-color:var(--gray);">
    <i class="fas fa-keyboard" style="color:var(--gray);margin-right:0.3em;"></i> <strong style="color:var(--gray);">ãƒ’ãƒ³ãƒˆï¼š</strong>ã‚¢ãƒ—ãƒªã§ <kbd style="background:#222;padding:0.1em 0.5em;border-radius:3px;font-size:0.85rem;">Shift</kbd> ã‚’æŠ¼ã™ã¨ã€ã¡ã‚‡ã£ã¨ã ã‘å­¦æ ¡è‹±èªçš„ãªè¡¨ç¤ºã«åˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã™ã€‚æ°—ã«ãªã‚‹äººã ã‘ã©ã†ãã€‚
  </div>

  <div style="text-align:center; margin-top:2.5rem;">
    <a href="/app" class="cta-button"><i class="fas fa-cube" style="margin-right:0.4em"></i> Monolithã‚’ä½¿ã£ã¦ã¿ã‚‹</a>
  </div>
</div>

<!-- STEP 5: Tutor -->
<div class="step" id="step5">
  <span class="step-number">Step 5</span>
  <h2>Tutorã¨ãªã«ã‹å–‹ã£ã¦ã¿ã‚ˆã†</h2>
  <p>ã‚ã‹ã‚‰ãªã„ã“ã¨ã€æ°—ã«ãªã‚‹ã“ã¨ã€ãªã‚“ã§ã‚‚èã„ã¦ã¿ã¦ãã ã•ã„ã€‚<br>TutorãŒãªã‚“ã§ã‚‚ç­”ãˆã¾ã™ã€‚</p>

  <div class="sentence-demo" style="padding:0; overflow:hidden;">
    <div style="padding:12px 16px; background:#1a1a1a; border-bottom:1px solid #222; font-size:0.85rem; color:#888; display:flex; justify-content:space-between; align-items:center;">
      <div><i class="fa-solid fa-cube" style="color:#4a9eff"></i> <span style="color:#4a9eff; font-weight:600;">Tutor</span></div>
      <span style="color:#444;">&times;</span>
    </div>
    <div id="tutorMessages" style="max-height:300px; overflow-y:auto; padding:1.5rem; display:flex; flex-direction:column; gap:0.75rem;">
      <div class="tutor-row bot">
        <div style="display:flex; gap:0.5rem; align-items:flex-start;">
          <i class="fa-solid fa-cube" style="color:#4a9eff; margin-top:0.2rem;"></i>
          <div style="background:#1a1a2e; padding:0.6rem 1rem; border-radius:8px; border-top-left-radius:0; font-size:0.9rem; color:var(--text-light);">
            ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼è‰²ã«ã¤ã„ã¦ã€è‹±èªã«ã¤ã„ã¦ã€ãªã‚“ã§ã‚‚èã„ã¦ãã ã•ã„ã€‚
          </div>
        </div>
      </div>
    </div>
    <div style="display:flex; gap:0.5rem; padding:0.75rem 1rem; border-top:1px solid #2a2a2a; background:#111;">
      <input type="text" id="tutorInput" placeholder="é’ã¨ç·‘ã®é•ã„ã£ã¦ï¼Ÿ" style="flex:1; padding:0.5rem 0.75rem; background:#1a1a1a; border:1px solid #333; border-radius:6px; color:var(--text); font-size:0.9rem; outline:none;">
      <button id="tutorSend" style="padding:0.5rem 1rem; background:var(--accent); border:none; border-radius:6px; color:#000; cursor:pointer; font-size:0.9rem;"><i class="fas fa-paper-plane"></i></button>
    </div>
  </div>
</div>

<!-- Navigation -->
<div class="tut-nav">
  <a href="/"><i class="fas fa-arrow-left"></i> ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</a>
  <a href="/app">ã‚¢ãƒ—ãƒªã¸ <i class="fas fa-arrow-right"></i></a>
</div>

</div>

<script>
// Scroll-triggered animation
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
      // Animate blocks within this step
      const blocks = entry.target.querySelectorAll('.block, .block-nest');
      blocks.forEach(block => {
        const delay = parseInt(block.dataset.delay || 0);
        setTimeout(() => { block.classList.add('show'); block.style.opacity='1'; block.style.transform='scale(1)'; }, delay + 300);
      });
      const arrows = entry.target.querySelectorAll('.arrow');
      arrows.forEach((a, i) => {
        setTimeout(() => a.classList.add('show'), (i + 1) * 400 + 200);
      });
    }
  });
}, { threshold: 0.2 });

document.querySelectorAll('.step').forEach(step => observer.observe(step));

// Shift key Easter egg
document.addEventListener('keydown', e => {
  if (e.key === 'Shift') document.body.classList.add('shift-active');
});
document.addEventListener('keyup', e => {
  if (e.key === 'Shift') document.body.classList.remove('shift-active');
});

// Tutor chat
const tutorMessages = document.getElementById('tutorMessages');
const tutorInput = document.getElementById('tutorInput');
const tutorSend = document.getElementById('tutorSend');
let tutorHistory = [];

function appendTutorMsg(text, role) {
  const row = document.createElement('div');
  row.className = 'tutor-row ' + role;
  if (role === 'bot') {
    row.innerHTML = `<div style="display:flex;gap:0.5rem;align-items:flex-start;">
      <i class="fa-solid fa-cube" style="color:#4a9eff;margin-top:0.2rem;flex-shrink:0;"></i>
      <div style="background:#1a1a2e;padding:0.6rem 1rem;border-radius:8px;border-top-left-radius:0;font-size:0.9rem;color:var(--text-light);">${text}</div>
    </div>`;
  } else {
    row.innerHTML = `<div style="display:flex;gap:0.5rem;align-items:flex-start;justify-content:flex-end;">
      <div style="background:#2a2a1a;padding:0.6rem 1rem;border-radius:8px;border-top-right-radius:0;font-size:0.9rem;color:var(--text);">${text}</div>
      <i class="fas fa-user" style="color:var(--accent);margin-top:0.2rem;flex-shrink:0;"></i>
    </div>`;
  }
  tutorMessages.appendChild(row);
  tutorMessages.scrollTop = tutorMessages.scrollHeight;
}

async function sendTutor() {
  const msg = tutorInput.value.trim();
  if (!msg) return;
  tutorInput.value = '';
  appendTutorMsg(msg, 'user');
  tutorHistory.push({role: 'user', text: msg});

  const loading = document.createElement('div');
  loading.className = 'tutor-row bot';
  loading.innerHTML = '<div style="display:flex;gap:0.5rem;align-items:flex-start;"><i class="fa-solid fa-cube" style="color:#4a9eff;margin-top:0.2rem;animation:pulse 1s infinite;"></i><div style="color:var(--text-light);font-size:0.85rem;">...</div></div>';
  tutorMessages.appendChild(loading);
  tutorMessages.scrollTop = tutorMessages.scrollHeight;

  try {
    const res = await fetch('/api/chat', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({
        message: msg,
        context: 'ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãƒšãƒ¼ã‚¸ã§ã®è³ªå•ã§ã™ã€‚Monolithã®è‰²ã¨ãƒ–ãƒ­ãƒƒã‚¯ã«ã¤ã„ã¦ã€æ–‡æ³•ç”¨èªã‚’ãªã‚‹ã¹ãä½¿ã‚ãšã«ç­”ãˆã¦ãã ã•ã„ã€‚',
        history: tutorHistory.slice(0, -1)
      })
    });
    const data = await res.json();
    loading.remove();
    const reply = data.reply || data.error || 'ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ';
    appendTutorMsg(reply.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>'), 'bot');
    tutorHistory.push({role: 'bot', text: reply});
  } catch(e) {
    loading.remove();
    appendTutorMsg('é€šä¿¡ã‚¨ãƒ©ãƒ¼: ' + e.message, 'bot');
  }
}

tutorSend.addEventListener('click', sendTutor);
tutorInput.addEventListener('keydown', e => {
  if (e.key === 'Enter' && !e.isComposing) sendTutor();
});
</script>
</body>
</html>
